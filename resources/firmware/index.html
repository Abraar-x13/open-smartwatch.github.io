<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="http://open-smartwatch.github.io/resources/firmware/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Firmware - Open-SmartWatch</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../stylesheets/tags.css" rel="stylesheet" />
  <link href="../../stylesheets/max-width.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Firmware";
    var mkdocs_page_input_path = "resources/firmware.md";
    var mkdocs_page_url = "/resources/firmware/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Open-SmartWatch</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Watches</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../gallery/gallery-main/">Gallery</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../watches/light-edition/">Light Edition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../watches/gps-edition/">GPS Edition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../watches/community-forks/">Community Forks</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Resources</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../hardware/">Hardware</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Firmware</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#features">Features</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#support">Support</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#development-environment">Development Environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#git">Git</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#serial-drivers-ch340">Serial Drivers CH340</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#fixing-error-unknown-type-name-wait_queue_t-did-you-mean-wait_event">Fixing error: unknown type name ‘wait_queue_t’; did you mean ‘wait_event’?</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cloning-the-repository">Cloning the Repository</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#set-up-configh">Set up config.h</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#uploading">Uploading</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../3d-files-light-edition/">3D Files Light Edition</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../3d-files-gps-edition/">3D Files GPS Edition</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">OSW Apps</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../oswapps/watchfaces/">Watchfaces</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../oswapps/tools/">Tools</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../oswapps/games/">Games</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">HowTos</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/software/">Get Design Software</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/assembly/">Assembly Note</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/aliexpress/">Find Parts on Aliexpress</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/hardware/">Additional Soldering Tools</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Open-SmartWatch</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Resources &raquo;</li>
        
      
    
    <li>Firmware</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="firmware">Firmware</h1>
<h2 id="features">Features</h2>
<p>The table below list all currently available features of the OSW-OS. These features can be manually enabled (or disabled) by modifying the <code>platformio.ini</code> and adding (or removing) their <code>-D</code>-Define lines.</p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Description</th>
<th>Requirements</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OSW_FEATURE_STATS_STEPS</code></td>
<td>Enable step history (displayed on the watchfaces)</td>
<td>-</td>
</tr>
<tr>
<td><code>OSW_FEATURE_WIFI</code></td>
<td>Enable all wifi releated functions (services, webinterface)</td>
<td>-</td>
</tr>
<tr>
<td><code>OSW_FEATURE_WIFI_APST</code></td>
<td>Allow the watch to enable wifi client and station simultaneously</td>
<td><code>OSW_FEATURE_WIFI</code></td>
</tr>
<tr>
<td><code>OSW_FEATURE_WIFI_ONBOOT</code></td>
<td>Allow the user to enable the wifi on boot</td>
<td><code>OSW_FEATURE_WIFI</code></td>
</tr>
<tr>
<td><code>OSW_FEATURE_LUA</code></td>
<td>Enable LUA scripting support for apps</td>
<td><code>LUA_C89_NUMBERS</code></td>
</tr>
<tr>
<td><code>LUA_C89_NUMBERS</code></td>
<td>Needed when compiling with LUA support</td>
<td>-</td>
</tr>
<tr>
<td><code>DEBUG=1</code></td>
<td>Enables debug logging to the console &amp; additional utilities</td>
<td>-</td>
</tr>
<tr>
<td><code>GPS_EDITION</code></td>
<td>Configure the build for use with GPS (including apps, api, sensors)</td>
<td><code>PROGMEM_TILES</code>, <code>BOARD_HAS_PSRAM</code></td>
</tr>
<tr>
<td><code>PROGMEM_TILES</code></td>
<td>Needed when compiling with GPS support</td>
<td>-</td>
</tr>
<tr>
<td><code>BOARD_HAS_PSRAM</code></td>
<td>Needed when compiling with GPS support</td>
<td>-</td>
</tr>
<tr>
<td><code>GPS_EDITION_ROTATED</code></td>
<td>Replacement for <code>GPS_EDITION</code> to work with flipped boards</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="support">Support</h3>
<p>The table below lists which features are available in which version of the OS by default. It is always our goal to also support older hardware revisions, but not all features can run properly using the old schematics.</p>
<table>
<thead>
<tr>
<th>Flag</th>
<th><code>LIGHT_EDITION_V4_0</code></th>
<th><code>LIGHT_EDITION_V3_3</code></th>
<th><code>LIGHT_EDITION_V3_2</code></th>
<th><code>LIGHT_EDITION_DEV_LUA</code></th>
<th><code>GPS_EDITION_V3_1</code></th>
<th><code>GPS_EDITION_DEV_ROTATED</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OSW_FEATURE_STATS_STEPS</code></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>❌</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td><code>OSW_FEATURE_WIFI</code></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>❌</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td><code>OSW_FEATURE_WIFI_APST</code></td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td><code>OSW_FEATURE_WIFI_ONBOOT</code></td>
<td>✓</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td><code>OSW_FEATURE_LUA</code></td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✓</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites">Prerequisites</h2>
<p>This page describes the requirements to manually flash the firmware.</p>
<p>Also check the latest readme file within the software repository: <a href="https://github.com/Open-Smartwatch/open-smartwatch-os/blob/master/Readme.md">https://github.com/Open-Smartwatch/open-smartwatch-os/blob/master/Readme.md</a></p>
<p>Watch this video: <a href="https://www.youtube.com/watch?v=p-mDOIUr-rQ&amp;ab_channel=pauls_3d_things">https://www.youtube.com/watch?v=p-mDOIUr-rQ&amp;ab_channel=pauls_3d_things</a></p>
<h3 id="development-environment">Development Environment</h3>
<p>To flash the latest software to the open-smartwatch you will need to install VScode with PlatformIO (Youtube tutorial: <a href="https://youtu.be/JmvMvIphMnY">https://youtu.be/JmvMvIphMnY</a>).</p>
<h3 id="git">Git</h3>
<p>Install <code>git</code> from <a href="https://git-scm.com">https://git-scm.com</a>.</p>
<h3 id="serial-drivers-ch340">Serial Drivers CH340</h3>
<p>The Open-Smartwatch uses a <code>ch340</code> for USB to serial. Please install the drivers from the manufacturer: <a href="http://www.wch-ic.com/downloads/CH341SER_ZIP.html">http://www.wch-ic.com/downloads/CH341SER_ZIP.html</a></p>
<h4 id="fixing-error-unknown-type-name-wait_queue_t-did-you-mean-wait_event">Fixing <code>error: unknown type name ‘wait_queue_t’; did you mean ‘wait_event’?</code></h4>
<p>On Fedora Silverblue 34 <code>make</code> outputs <code>error: unknown type name ‘wait_queue_t’; did you mean ‘wait_event’?</code>.
This can be fixed by using <a href="https://github.com/juliagoda/CH341SER">this fork from juliagoda</a>.</p>
<h2 id="cloning-the-repository">Cloning the Repository</h2>
<p>Clone the source code repository <strong>recursively</strong>:</p>
<pre><code>git clone --recurse-submodules https://github.com/Open-Smartwatch/open-smartwatch-os.git
</code></pre>
<p>Then, open the directory with Visual Studio Code.</p>
<h2 id="set-up-configh">Set up config.h</h2>
<p>Got to the directory <code>include/</code> and take a look into the <code>config.h.example</code> - all instructions are noted there.</p>
<h2 id="uploading">Uploading</h2>
<p><img src="/assets/uploading.jpg" width="512px"/></p>
<p><strong>Keep in mind the PCB is flipped when inserted into the watch:</strong></p>
<ol>
<li>To set the watch into upload mode, you need to hold the lower left button and then click the reset button (top left). This enables flash mode, the display will turn dark.</li>
<li>Press the reset button after uploading</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../3d-files-light-edition/" class="btn btn-neutral float-right" title="3D Files Light Edition">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../hardware/" class="btn btn-neutral" title="Hardware"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../hardware/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../3d-files-light-edition/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
